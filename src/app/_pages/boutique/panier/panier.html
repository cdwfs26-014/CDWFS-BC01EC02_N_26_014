<section class="px-6 py-6">
  <h2 class="text-2xl font-bold mb-4">Votre Panier</h2>

  <div *ngIf="authService.getChoice()" class="mt-4 p-4 bg-blue-100 border-l-4 border-blue-500 text-blue-900 rounded">
    <p>Mode de consommation choisi : <strong>{{ authService.getChoice() === 'sur_place' ? 'Sur place' : 'À emporter' }}</strong></p>
  </div>


  <div *ngFor="let item of cartService.getItems()()" class="flex justify-between items-center mb-4 p-4 bg-gray-900 rounded-lg">
    <div>
      <h3 class="text-orange-500 font-semibold">{{ item.product.nom }}</h3>
      <p class="text-gray-400 text-sm">{{ item.quantity }} x {{ item.product.prix_unitaire }} €</p>
    </div>
    <button (click)="remove(item.product.reference_produit)" class="bg-red-500 hover:bg-red-400 text-white px-3 py-1 rounded-md">Supprimer</button>
  </div>

  <div class="mt-6 text-right">
    <p class="text-gray-400">Total : {{ total() | number:'1.2-2' }} €</p>
    <p *ngIf="authService.isLoggedIn()" class="text-green-500 font-semibold">Total avec réduction 2% : {{ totalWithDiscount() | number:'1.2-2' }} €</p>
    <button class="mt-4 bg-green-500 hover:bg-green-400 text-white px-6 py-2 rounded">
      Payer
    </button>
  </div>

  <!-- Message pour les utilisateurs non connectés -->
  <div *ngIf="!authService.isLoggedIn()" class="mt-6 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-900 rounded">
    <p>Pour profiter de <strong>2% de réduction</strong>, veuillez vous connecter :</p>
    <a routerLink="/login">
      <button class="mt-2 bg-yellow-500 hover:bg-yellow-400 text-white px-4 py-2 rounded">
        Se connecter
      </button>
    </a>
  </div>
</section>

<app-footer></app-footer>